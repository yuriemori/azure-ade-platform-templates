# PSRule for Azure Configuration
# This file configures PSRule to validate Azure resources against best practices

# Azure-specific configuration
configuration:
  # Enable Azure resource analysis
  AZURE_RESOURCE_MANAGER_ENABLED: true
  
  # Subscription and tenant configuration
  AZURE_SUBSCRIPTION_ID: ''  # Will be set in CI/CD
  AZURE_TENANT_ID: ''        # Will be set in CI/CD
  
  # Resource naming configuration
  AZURE_RESOURCE_NAMING_PREFIX: ''
  AZURE_RESOURCE_NAMING_SUFFIX: ''
  
  # Enable specific rule categories
  AZURE_SECURITY_ENABLED: true
  AZURE_RELIABILITY_ENABLED: true
  AZURE_PERFORMANCE_ENABLED: true
  AZURE_COSTOPTIMIZATION_ENABLED: true

# Input configuration
input:
  pathIgnore:
    - '*.tmp'
    - '*.log'
    - 'node_modules/'
    - '.git/'

# Output configuration  
output:
  culture: ['en-US']
  format: 'Sarif'
  path: 'reports/ps-rule-results.sarif'

# Rule configuration
rule:
  # Include Azure-specific rules
  include:
    - 'Azure.*'
  
  # Exclude certain rules if needed
  exclude: []
  
  # Configure rule tags
  tag:
    severity: ['Critical', 'Important', 'Moderate']
    category: ['Security', 'Reliability', 'Performance']

# Binding configuration for Azure resources
binding:
  targetType:
    - 'Microsoft.Resources/deployments'
    - 'Microsoft.Storage/storageAccounts'
    - 'Microsoft.KeyVault/vaults'
    - 'Microsoft.Sql/servers'
    - 'Microsoft.Web/sites'
    - 'Microsoft.Network/virtualNetworks'
    - 'Microsoft.Insights/components'

# Execution configuration
execution:
  languageMode: 'FullLanguage'
  inconclusiveWarning: false
  notProcessedWarning: false